---
interface Skill {
  name: string;
  src: string;
  description: string;
  items?: string[];
}

interface Props {
  skills: Skill[];
}

const { skills } = Astro.props;
---

<section class="px-4">
  <div class="container mx-auto">
    <div class="mb-12">
      <span class="tag tag-blue tag-xl">
        Notre offre
      </span>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
      <!-- Navigation à gauche -->
      <div class="lg:col-span-4 space-y-2">
        {skills.map((skill, index) => {
          const colors = ['bg-orange', 'bg-blue', 'bg-pink', 'bg-purple', 'bg-green', 'bg-yellow'];
          const colorClass = colors[index % colors.length];
          return (
            <button
              class={`skill-nav-btn w-full text-left p-4 border-2 border-black rounded-[10px] transition-all duration-200 ${index === 1 ? 'active' : ''}`}
              data-skill-index={index}
              data-color={colorClass}
            >
              <span class="text-base md:text-lg lg:text-xl font-display uppercase">{skill.name}</span>
            </button>
          );
        })}
      </div>

      <!-- Contenu à droite -->
      <div class="lg:col-span-8">
        {skills.map((skill, index) => (
          <div
            class={`skill-content ${index === 1 ? 'active' : 'hidden'}`}
            data-skill-content={index}
          >
            <div class="space-y-6">
              <h3 class="text-2xl md:text-3xl lg:text-4xl uppercase font-normal">
                {skill.name}
              </h3>
              <p class="text-black text-lg md:text-xl lg:text-2xl leading-relaxed">{skill.description}</p>
              {skill.items && skill.items.length > 0 && (
                <div>
                  <h4 class="font-semibold text-lg md:text-xl mb-4">Nos services :</h4>
                  <ul class="space-y-3">
                    {skill.items.map((item) => (
                      <li class="flex items-start gap-3">
                        <span class="text-black text-lg md:text-xl">•</span>
                        <span class="text-black text-base md:text-lg lg:text-xl">{item}</span>
                      </li>
                    ))}
                  </ul>
                </div>
              )}
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .skill-nav-btn {
    @apply bg-beige;
  }

  .skill-nav-btn.active {
    filter: drop-shadow(4px 4px 0 var(--color-border));
    transform: translate3d(2px, 2px, 0);
  }

  .skill-nav-btn:hover:not(.active) {
    filter: drop-shadow(2px 2px 0 var(--color-border));
    transform: translate3d(1px, 1px, 0);
  }

  .skill-nav-btn.active[data-color="bg-orange"] {
    @apply bg-orange;
    color: var(--text-on-orange);
  }

  .skill-nav-btn.active[data-color="bg-blue"] {
    @apply bg-blue;
    color: var(--text-on-blue);
  }

  .skill-nav-btn.active[data-color="bg-pink"] {
    @apply bg-pink;
    color: var(--text-on-pink);
  }

  .skill-nav-btn.active[data-color="bg-purple"] {
    @apply bg-purple;
    color: var(--text-on-purple);
  }

  .skill-nav-btn.active[data-color="bg-green"] {
    @apply bg-green;
    color: var(--text-on-green);
  }

  .skill-nav-btn.active[data-color="bg-yellow"] {
    @apply bg-yellow;
    color: var(--text-on-yellow);
  }
</style>

<script>
  const navButtons = document.querySelectorAll('.skill-nav-btn');
  const contentSections = document.querySelectorAll('.skill-content');

  navButtons.forEach((button, index) => {
    button.addEventListener('click', () => {
      // Remove active class from all buttons
      navButtons.forEach(btn => btn.classList.remove('active'));

      // Add active class to clicked button
      button.classList.add('active');

      // Hide all content sections
      contentSections.forEach(section => {
        section.classList.remove('active');
        section.classList.add('hidden');
      });

      // Show corresponding content
      const targetContent = document.querySelector(`[data-skill-content="${index}"]`);
      if (targetContent) {
        targetContent.classList.add('active');
        targetContent.classList.remove('hidden');
      }
    });
  });
</script>
