---
interface Props {
  hideLogo?: boolean;
}

const { hideLogo = false } = Astro.props;
---

<nav class="fixed top-0 left-0 right-0 z-50 bg-white shadow-sm">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between">
      <!-- Spacer for centering -->
      <div class={`flex-1 ${hideLogo ? 'hidden lg:block' : ''}`}></div>

      <!-- Logo / Brand -->
      <div class={`py-4 ${hideLogo ? 'hidden lg:block' : ''}`}>
        <a href="/" class="block">
          <svg width="200" viewBox="0 0 260 48" xmlns="http://www.w3.org/2000/svg" fill="none">
            <defs>
              <mask id="coop-mask">
                <circle cx="24" cy="24" r="22" fill="white"/>
              </mask>
            </defs>
            <g mask="url(#coop-mask)">
              <path d="M-4 14 C10 6, 22 6, 52 22" stroke="currentColor" stroke-width="3"/>
              <path d="M-4 24 C14 18, 30 20, 52 30" stroke="currentColor" stroke-width="3"/>
              <path d="M-4 34 C12 40, 28 40, 52 26" stroke="currentColor" stroke-width="3"/>
            </g>
            <circle cx="24" cy="24" r="22" stroke="currentColor" stroke-width="2" fill="none"/>
            <text x="64" y="31"
                  fill="currentColor"
                  font-size="22"
                  font-family="Inter, Helvetica, Arial, sans-serif"
                  font-weight="400"
                  letter-spacing="0.2">
              <tspan font-weight="400">T</tspan>eles<tspan font-weight="600">C</tspan>oop
            </text>
          </svg>
        </a>
      </div>

      <!-- Mobile menu button -->
      <button
        id="mobile-menu-button"
        class="lg:hidden p-2"
        aria-label="Menu"
        aria-expanded="false"
      >
        <div class="w-6 h-5 flex flex-col justify-between">
          <span class="block h-0.5 w-full bg-black transition-all"></span>
          <span class="block h-0.5 w-full bg-black transition-all"></span>
          <span class="block h-0.5 w-full bg-black transition-all"></span>
        </div>
      </button>

      <!-- Desktop Navigation -->
      <nav class="hidden lg:flex flex-1 justify-end items-center gap-6">
        <a href="/coopérative" class="relative group py-2 hover:text-accent-blue transition-colors">
          La coopérative
          <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-accent-blue group-hover:w-full transition-all"></div>
        </a>
        <a href="/projets" class="relative group py-2 hover:text-accent-green transition-colors">
          Nos projets
          <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-accent-green group-hover:w-full transition-all"></div>
        </a>
        <a href="/blog" class="relative group py-2 hover:text-accent-orange transition-colors">
          Blog
          <div class="absolute bottom-0 left-0 w-0 h-0.5 bg-accent-orange group-hover:w-full transition-all"></div>
        </a>
        <a href="mailto:contact@telescoop.fr" class="relative group py-2 hover:text-accent-yellow transition-colors">
          Nous contacter
          <div class="absolute bottom-0 right-0 w-0 h-0.5 bg-accent-yellow group-hover:w-full transition-all"></div>
        </a>
      </nav>
    </div>

    <!-- Mobile Navigation -->
    <nav id="mobile-menu" class="hidden lg:hidden pb-4">
      <div class="flex flex-col gap-4">
        <a href="/" class="py-2 hover:text-accent-blue transition-colors">Accueil</a>
        <a href="/coopérative" class="py-2 hover:text-accent-blue transition-colors">La coopérative</a>
        <a href="/projets" class="py-2 hover:text-accent-green transition-colors">Nos projets</a>
        <a href="/blog" class="py-2 hover:text-accent-orange transition-colors">Blog</a>
        <a href="mailto:contact@telescoop.fr" class="py-2 hover:text-accent-yellow transition-colors">Nous contacter</a>
      </div>
    </nav>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');

    button?.addEventListener('click', () => {
      menu?.classList.toggle('hidden');
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      button.setAttribute('aria-expanded', String(!isExpanded));
    });
  });
</script>
